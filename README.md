# Описание проекта

Данное десктопное приложение представляет собой программу «АТС» для управления междугородними тарифами.  
Приложение построено на Java (Swing). Представлена реализация как Java-проектом, так и исполняемым файлом (.exe / .msi, собирается через jpackage / launch4j) — для запуска на ПК без установленной JRE.

В 5-й лабораторной работе проект доработан: данные о тарифах переносятся в базу данных **SQLite**, а все операции (добавление / изменение / удаление / импорт / экспорт) работают через БД.

# Функциональные возможности

## Управление тарифами

- Добавление нового тарифа (диалог «Добавить»).
- Редактирование существующего тарифа (диалог «Изменить»).
- Удаление тарифа.
- Отображение всех тарифов в таблице (сортировка по клику по заголовку).
- Защита от дубликатов (точно такой же город/тип/цена/скидка не добавляется).

Минимум два окна:

- Главное окно `MainFrame` с таблицей и меню.
- Диалог `TariffFormDialog` с перегруженным конструктором:
  - режим «Добавить»;
  - режим «Изменить» (подставляет значения выбранного тарифа и меняет надписи/кнопку).

## Импорт / экспорт

- Импорт тарифов из CSV (UTF-8; разделитель `;`, первая строка — `city;type;price;discount`).
- Экспорт тарифов в CSV (UTF-8 с BOM — корректно открывается в Excel).
- Импорт/экспорт выполняются через стандартный диалог выбора файла (`JFileChooser`, аналог OpenFileDialog).

В ЛР-5:

- импорт **загружает данные в БД** (добавлением, без очистки);
- при импорте дубликаты пропускаются (по бизнес-правилам и по UNIQUE-ограничению в таблице).

## Расчёты

- Средняя итоговая цена по всем тарифам.
- Общая сумма итоговых цен.
- Массовое изменение всех цен на заданный процент (с проверкой диапазона).

## Проверки и устойчивость

- Валидация города/цены/скидки на уровне сервиса (`TariffManager`).
- Предметные ошибки через `TariffException` (показываются пользователю в диалогах).
- Поле «Скидка» блокируется для обычного тарифа (`REGULAR`).
- В таблице числа сортируются как числа (за счёт `getColumnClass()`).
- Дополнительные проверки логики, чтобы пользователь не мог «сломать» приложение (проверка диапазонов, индексов, пустых списков и т.д.).

# Работа с базой данных (SQLite)

В 5-й лабораторной данные о тарифах хранятся не в списке в памяти, а в базе данных **SQLite**:

- Файл базы данных: `atc.db` (создаётся в рабочей папке приложения при первом запуске).
- Таблица тарифов:

  ```sql
  CREATE TABLE IF NOT EXISTS tariffs (
      city     TEXT NOT NULL,
      type     TEXT NOT NULL CHECK (type IN ('REGULAR', 'PRIVILEGED')),
      price    REAL NOT NULL,
      discount REAL NOT NULL,
      UNIQUE (city, type, price, discount)
  );
